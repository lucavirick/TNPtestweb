<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using Jython in FDMEE | The Nth Power</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../style.css">
    <style>
        .blog-post-header {
            padding: 8rem 0 4rem 0;
            background: linear-gradient(to bottom, #050101, #000);
            text-align: left;
        }

        .blog-post-header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            color: #fff;
            margin-bottom: 1rem;
            line-height: 1.2;
        }

        .blog-post-meta {
            font-family: 'Inter', monospace;
            color: var(--accent-red);
            font-size: 0.9rem;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            margin-bottom: 2rem;
            display: block;
        }

        .blog-post-content {
            padding: 0 0 6rem 0;
            max-width: 1000px;
            margin: 3rem auto 0 auto;
            /* Added breathing room */
            color: #ddd;
            font-size: 1.1rem;
            line-height: 1.8;
            font-family: 'Outfit', sans-serif;
        }

        .blog-post-content p {
            margin-bottom: 1.5rem;
        }

        .blog-post-content h2 {
            font-family: 'Playfair Display', serif;
            color: #fff;
            margin-top: 3rem;
            margin-bottom: 1rem;
            font-size: 2rem;
        }

        .blog-post-content h3 {
            font-family: 'Inter', sans-serif;
            color: #eee;
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-size: 1.4rem;
        }

        .blog-post-content ul,
        .blog-post-content ol {
            margin-bottom: 2rem;
            padding-left: 2rem;
        }

        .blog-post-content li {
            margin-bottom: 0.8rem;
        }

        .code-block {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            padding: 1.5rem;
            border-radius: 8px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            color: #cecece;
            overflow-x: auto;
            margin: 2rem 0;
            white-space: pre-wrap;
        }

        .code-comment {
            color: #6a9955;
        }

        .code-keyword {
            color: #569cd6;
        }

        .code-string {
            color: #ce9178;
        }

        .back-link {
            display: inline-block;
            margin-bottom: 2rem;
            color: var(--accent-red);
            text-decoration: none;
            font-family: 'Inter', monospace;
            font-size: 0.9rem;
            transition: opacity 0.3s;
        }

        .back-link:hover {
            opacity: 0.8;
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .blog-post-header h1 {
                font-size: 2.2rem;
            }

            .blog-post-header {
                padding: 6rem 0 3rem 0;
            }

            .blog-post-content {
                padding: 0 1rem 6rem 1rem;
                /* More horizontal padding preventing edge jamming */
            }

            .blog-post-meta {
                margin-bottom: 1rem;
            }
        }
    </style>
</head>

<body>
    <div class="noise-overlay"></div>

    <nav class="floating-nav">
        <div class="nav-pill">
            <a href="../solution-data-integration.html" class="nav-item">Back to Solution</a>
            <a href="../index.html" class="nav-item">Home</a>
            <a href="../index.html#contact" class="nav-item">Contact</a>
        </div>
    </nav>

    <article>
        <header class="blog-post-header">
            <div class="container" style="max-width: 1000px;">
                <span class="blog-post-meta">FDMEE / Jython / Oracle EPM</span>
                <h1>Using Jython in On-Prem Hyperion (Oracle EPM) FDMEE to Concatenate Account + Flow</h1>
            </div>
        </header>

        <div class="container blog-post-content">
            <p>If you run Oracle Hyperion / Oracle EPM on-prem with FDMEE as your integration layer, you’ve probably run
                into the same pattern: the source file has multiple fields that together represent a “true” mapping key,
                but FDMEE mapping tables (or downstream target rules) are easiest to manage when you can map off one
                stable, deterministic source dimension value.</p>

            <p>A common case is when the source system (or a staging extract) splits a financial classification into two
                columns—e.g.:</p>
            <ul>
                <li><strong>Account</strong></li>
                <li><strong>Flow</strong> (or movement / activity / cash flow member)</li>
            </ul>

            <p>This shows up a lot when you’re importing from other platforms (including OneStream extracts) into an
                Oracle EPM landscape where your company code mapping logic depends on both what the account is and how
                it moved (flow).</p>

            <p>In this post, we’ll walk through a practical approach: use Jython scripting in FDMEE to concatenate
                Account + Flow into a single derived mapping key during import, so your mapping tables can be simpler
                and your company code logic more reliable.</p>

            <h2>Why concatenate Account + Flow in FDMEE?</h2>

            <h3>1) Reduce mapping table complexity</h3>
            <p>Instead of building conditional mapping logic like:</p>
            <div class="code-block">If Account = X and Flow = Y → Company Code = A
                If Account = X and Flow = Z → Company Code = B</div>
            <p>…you create one derived member such as <code>X_Y</code>, <code>X|Y</code>, or <code>X-Y</code> and map
                that directly.</p>

            <h3>2) Improve traceability</h3>
            <p>When someone asks “Why did this row map to Company Code 2100?” you can point to a single key value (like
                <code>401000_MVMNT</code>) rather than explaining a combination of fields.
            </p>

            <h3>3) Make mappings more portable across integrations</h3>
            <p>If you later change how Flow is represented in source files, you update the concatenation rule once
                rather than rewriting dozens or hundreds of mapping lines.</p>

            <h2>Where Jython fits in the FDMEE flow</h2>
            <p>On-prem FDMEE supports Jython-based event scripts that can run during import and validation stages. The
                most common way to do this is:</p>
            <ol>
                <li>Add (or use an existing) custom dimension / attribute / “UD” field in the import format.</li>
                <li>Populate that field via a Jython event script (row-by-row) during import.</li>
                <li>Build mappings using the derived value.</li>
            </ol>
            <p>Conceptually:</p>
            <p><em>OneStream extract → FDMEE Import Format → Staging table → (Jython transforms) → Mapping → Load</em>
            </p>

            <h2>Approach: create a derived “AccountFlowKey”</h2>

            <h3>Step 1 — Ensure you have a landing column for the derived key</h3>
            <p>In your Import Format, map:</p>
            <ul>
                <li><strong>Source Account</strong> → FDMEE Account (or a source dimension column you use for mapping)
                </li>
                <li><strong>Source Flow</strong> → a staging column (often one of the available “UD” columns depending
                    on your configuration)</li>
            </ul>
            <p>Create an additional mapped column for the concatenated key (for example, UDx or a custom column you use
                for mapping). Your goal is to have both raw fields available, plus a place to store the concatenated
                result.</p>

            <h3>Step 2 — Add a Jython event script to build the key</h3>
            <p>In FDMEE, you typically implement this in an event like an import row-level hook, where you can access
                the staged row fields and update one field before mapping occurs.</p>
            <p>A practical concatenation rule looks like:</p>
            <ul>
                <li>trim whitespace</li>
                <li>normalize nulls</li>
                <li>enforce uppercase (optional, but helpful)</li>
                <li>use a delimiter that won’t collide with natural member names (<code>|</code> is a good one)</li>
            </ul>
            <p>Example output key: <code>401000|MVMNT</code></p>

            <h3>Step 3 — Map company codes based on the derived key</h3>
            <p>Now your mapping table logic can be:</p>
            <ul>
                <li><strong>Source:</strong> AccountFlowKey</li>
                <li><strong>Target:</strong> Company Code (or a target dimension member used to drive company
                    assignment)</li>
            </ul>
            <p>This can drastically reduce the number of mapping rules and eliminate edge-case logic where one field is
                blank.</p>

            <h2>Example Jython logic (row-level)</h2>
            <p>Below is an example pattern you can adapt. The exact object names vary by implementation (and by which
                event script you attach it to), but the logic is the important part:</p>

            <div class="code-block"><span class="code-comment"># Pseudocode-style Jython for FDMEE event
                    scripting</span>
                <span class="code-comment"># Goal: AccountFlowKey = Account|Flow</span>

                <span class="code-keyword">def</span> build_key(val):
                <span class="code-keyword">if</span> val <span class="code-keyword">is None</span>:
                <span class="code-keyword">return</span> <span class="code-string">""</span>
                <span class="code-keyword">return</span> str(val).strip()

                acct = build_key(fdmRow[<span class="code-string">"ACCOUNT"</span>]) <span class="code-comment"># adjust
                    to your column name</span>
                flow = build_key(fdmRow[<span class="code-string">"UD1"</span>]) <span class="code-comment"># adjust to
                    your Flow column (e.g., UD1)</span>

                <span class="code-comment"># Optional normalization</span>
                acct = acct.upper()
                flow = flow.upper()

                <span class="code-comment"># Decide how to handle blanks</span>
                <span class="code-comment"># If flow is missing, you can either:</span>
                <span class="code-comment"># (a) use acct only</span>
                <span class="code-comment"># (b) append a placeholder like 'NOFLOW'</span>
                <span class="code-keyword">if</span> flow == <span class="code-string">""</span>:
                key = acct
                <span class="code-keyword">else</span>:
                key = acct + <span class="code-string">"|"</span> + flow

                <span class="code-comment"># Write to the derived column (e.g., UD2)</span>
                fdmRow[<span class="code-string">"UD2"</span>] = key
            </div>

            <h3>Notes that matter in real life:</h3>
            <ul>
                <li><strong>Pick a delimiter</strong> that won’t appear in your members (<code>|</code> is usually
                    safe).</li>
                <li><strong>If your downstream mapping expects flow to always exist</strong>, don’t silently drop it—use
                    <code>NOFLOW</code>.
                </li>
                <li><strong>Keep casing consistent</strong> or you’ll create “phantom mismatches” in mapping tables.
                </li>
            </ul>

            <h2>Handling real-world OneStream extracts</h2>
            <p>OneStream exports often contain quirks that are invisible until you’re mapping at scale:</p>
            <ul>
                <li><strong>Whitespace and padding:</strong> <code>"401000 " ≠ "401000"</code>. Always
                    <code>strip()</code>.
                </li>
                <li><strong>Mixed casing:</strong> <code>mvmnt</code> vs <code>MVMNT</code>. Pick one normalization
                    (commonly uppercase).</li>
                <li><strong>Null flows on balance sheet rows:</strong> Some extracts only populate Flow for
                    movement-based accounts. Decide early:
                    <ul>
                        <li>Option A: default flow to BAL or ENDING</li>
                        <li>Option B: keep blank and map off account-only</li>
                        <li>Option C: route blanks to an exception bucket</li>
                    </ul>
                </li>
                <li><strong>Delimiter collisions:</strong> If your account names can contain hyphens, don’t use
                    <code>-</code>. Prefer <code>|</code> or a double underscore <code>__</code>.
                </li>
            </ul>

            <h2>Testing and validation tips</h2>
            <h3>1) Validate the derived key in the Workbench</h3>
            <p>Before you touch mappings, import a small file and confirm:</p>
            <ul>
                <li>The concatenated values look correct</li>
                <li>You aren’t producing unexpected blanks</li>
                <li>You aren’t creating multiple keys for “the same” account due to casing/spacing</li>
            </ul>

            <h3>2) Add a sanity check for missing Account</h3>
            <p>If Account is missing, it’s usually a file/data quality issue. Log it or tag it for exception handling.
            </p>

            <h3>3) Keep mapping tables deterministic</h3>
            <p>If you use NOFLOW, make sure you map it explicitly (or block it) so it doesn’t quietly fall into a
                default rule.</p>

            <h2>Operational benefits you’ll notice immediately</h2>
            <ul>
                <li><strong>Fewer mapping lines</strong> and fewer “if Account=X and Flow=Y” exceptions</li>
                <li><strong>Cleaner change control:</strong> new combinations mean adding a row, not rewriting logic
                </li>
                <li><strong>Better auditability:</strong> mapping keys are visible and explainable</li>
                <li><strong>Lower risk during close:</strong> fewer moving parts = fewer surprises</li>
            </ul>
        </div>
    </article>

    <div class="next-article-container" style="max-width: 1000px; margin: 0 auto 4rem auto; padding: 0 1rem;">
        <hr style="border-color: rgba(255,255,255,0.1); margin-bottom: 2rem;">
        <a href="onestream-rest-api.html" class="next-article-link"
            style="display: block; text-decoration: none; padding: 2rem; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; transition: all 0.3s ease;">
            <span
                style="display: block; font-family: 'Inter', monospace; font-size: 0.8rem; color: #dc2626; margin-bottom: 0.5rem; letter-spacing: 0.1em; text-transform: uppercase;">Next
                Article</span>
            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.5rem; color: #fff; margin: 0;">REST API
                Patterns for OneStream &rarr;</h3>
        </a>
    </div>
    <style>
        .next-article-link:hover {
            background: rgba(255, 255, 255, 0.05) !important;
            border-color: #dc2626 !important;
            transform: translateY(-2px);
        }
    </style>

    <footer class="main-footer">
        <div class="container footer-bottom">
            <div class="social-links">
                <a href="https://www.linkedin.com/company/the-nth-power-inc." target="_blank">LinkedIn</a>
                <a href="../privacy-policy.html">Privacy Policy</a>
                <a href="../terms-of-service.html">Terms of Service</a>
            </div>
            <span>2026 The Nth Power. All rights reserved.</span>
        </div>
    </footer>
</body>

</html>